<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz JASS - Sistema de Agua</title>
  <style>
    :root{
      --bg:#e6f7ff; --card:#ffffff; --accent:#0277bd; --accent-2:#0288d1; --good:#2e7d32; --bad:#c62828;
      --btn1:#0288d1; --btn2:#00b0ff; --btn3:#26c6da; --btn4:#26a69a;
      --glass: rgba(255,255,255,0.9);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg), #dff3ff 60%);color:#023047; font-size: 18px;}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:2rem}
    .card{width:960px;max-width:96%;background:linear-gradient(180deg, rgba(255,255,255,0.95), var(--card));box-shadow:0 10px 30px rgba(2,40,80,0.12);border-radius:16px;overflow:hidden;border:1px solid rgba(2,120,180,0.1)}
    header{display:flex;align-items:center;gap:1rem;padding:1.2rem 1.6rem;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white}
    .logo{width:64px;height:64px;border-radius:12px;background:radial-gradient(circle at 30% 30%, #b3e5fc, #0288d1);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:white;box-shadow:0 6px 18px rgba(2,80,120,0.25)}
    .title{font-size:22px;font-weight:700}
    .subtitle{font-size:16px;opacity:0.95}
    .main{display:grid;grid-template-columns:1fr 360px;gap:1rem;padding:1.6rem}
    @media(max-width:900px){.main{grid-template-columns:1fr;}.sidebar{order:2}}
    .quiz-area{padding:1rem}
    .question-card{background:var(--glass);padding:1.5rem;border-radius:12px;border:1px solid rgba(2,120,180,0.1)}
    .qtop{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
    .qtext{font-size:24px;font-weight:700; line-height: 1.4;}
    .progress{height:12px;background:rgba(2,40,80,0.06);border-radius:30px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--btn1),var(--btn2));width:0%}
    .answers{display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;margin-top:1.5rem}
    .ans{padding:16px;border-radius:10px;background:white;border:1px solid rgba(2,40,80,0.06);cursor:pointer;font-weight:600;box-shadow:0 6px 16px rgba(2,40,80,0.04);transition:transform .12s ease, box-shadow .12s; font-size: 18px;}
    .ans:hover{transform:translateY(-4px);box-shadow:0 10px 22px rgba(2,40,80,0.09)}
    .a1{background:linear-gradient(180deg,var(--btn1),#039be5);color:white}
    .a2{background:linear-gradient(180deg,var(--btn2),#00b8ff);color:white}
    .a3{background:linear-gradient(180deg,var(--btn3),#26c6da);color:white}
    .a4{background:linear-gradient(180deg,var(--btn4),#2bbbad);color:white}
    .sidebar{padding:1rem;border-left:1px dashed rgba(2,120,180,0.1)}
    .stat{background:white;padding:16px;border-radius:10px;margin-bottom:1rem;border:1px solid rgba(2,40,80,0.06); font-size: 18px;}
    .timer{font-weight:800;font-size:26px;color:var(--accent)}
    .score{font-weight:800;font-size:24px}
    .btn{display:inline-block;padding:12px 18px;border-radius:10px;background:var(--accent);color:white;font-weight:700;border:none;cursor:pointer; font-size: 18px;}
    .small{font-size:15px;opacity:0.9}
    footer{padding:1rem;text-align:center;background:linear-gradient(90deg, rgba(2,120,180,0.03), transparent); font-size: 16px;}
    .droplets{position:absolute;right:18px;top:8px;opacity:0.12;font-size:40px}
    .result{padding:1rem;text-align:center}
    .correct{background:linear-gradient(90deg,#e8f5e9,#c8e6c9);border:1px solid rgba(46,125,50,0.3)}
    .wrong{background:linear-gradient(90deg,#ffebee,#ffcdd2);border:1px solid rgba(198,40,40,0.3)}
    
    /* Alertas personalizadas */
    .alert {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 40px;
      border-radius: 20px;
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      z-index: 1000;
      box-shadow: 0 15px 40px rgba(0,0,0,0.3);
      min-width: 400px;
      max-width: 85%;
      animation: fadeIn 0.5s, fadeOut 0.5s 6.5s;
    }
    
    .alert-success {
      background: linear-gradient(135deg, #4CAF50, #2E7D32);
      color: white;
      border: 3px solid #1B5E20;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .alert-error {
      background: linear-gradient(135deg, #F44336, #C62828);
      color: white;
      border: 3px solid #B71C1C;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .correct-answer {
      margin-top: 20px;
      font-size: 22px;
      font-weight: bold;
      padding: 20px;
      background: rgba(255,255,255,0.25);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.3);
    }
    
    @keyframes fadeIn {
      from {opacity: 0; transform: translate(-50%, -50%) scale(0.8);}
      to {opacity: 1; transform: translate(-50%, -50%) scale(1);}
    }
    
    @keyframes fadeOut {
      from {opacity: 1; transform: translate(-50%, -50%) scale(1);}
      to {opacity: 0; transform: translate(-50%, -50%) scale(0.8);}
    }
  </style>
</head>
<body>
  <!-- Pantalla de inicio -->
  <div class="wrap" id="welcomeScreen">
    <div class="card" style="text-align: center; padding: 2rem;">
      <header style="justify-content: center; margin-bottom: 2rem;">
        <div class="logo">JASS</div>
        <div>
          <div class="title">Quiz Interactivo ‚Äî Sistema JASS</div>
          <div class="subtitle">Detecta conceptos clave del proyecto de gesti√≥n de agua</div>
        </div>
      </header>
        
      <div style="margin: 2rem 0;">
        <h2 style="color: var(--accent); font-size: 28px;">¬°Bienvenido al Quiz JASS!</h2>
        <p style="font-size: 20px; margin: 1.5rem 0; line-height: 1.6;">
          Pon a prueba tus conocimientos sobre el sistema de gesti√≥n de agua JASS.<br>
          Responde 10 preguntas de diferentes niveles de dificultad.
        </p>
        <div style="background: var(--glass); padding: 1.5rem; border-radius: 15px; margin: 1.5rem auto; max-width: 80%; border: 1px solid rgba(2,120,180,0.1);">
          <p style="font-size: 18px; margin: 0.5rem 0;"><strong>‚è±Ô∏è Tiempo por pregunta:</strong> 60 segundos</p>
          <p style="font-size: 18px; margin: 0.5rem 0;"><strong>üèÜ Sistema de puntaje:</strong> M√°s puntos por responder r√°pido</p>
          <p style="font-size: 18px; margin: 0.5rem 0;"><strong>üìä Niveles:</strong> F√°cil, Medio y Dif√≠cil</p>
        </div>
      </div>
        
      <button class="btn" id="startBtn" style="font-size: 22px; padding: 15px 30px; margin: 1rem 0;">
        üöÄ Iniciar Quiz
      </button>
        
      <footer style="margin-top: 2rem;">
        <small>Proyecto: PRS1 - Ms-Distribution<br>Presentadores: Victor y Maria</small>
      </footer>
    </div>
  </div>
    
  <!-- Pantalla del quiz (oculta inicialmente) -->
  <div class="wrap" id="quizScreen" style="display: none;">
    <div class="card">
      <header>
        <div class="logo">JASS</div>
        <div>
          <div class="title">Quiz Interactivo ‚Äî Sistema JASS</div>
          <div class="subtitle">Detecta conceptos clave del proyecto de gesti√≥n de agua</div>
        </div>
        <div style="margin-left:auto;text-align:right">
          <div class="small">Proyecto: PRS1 - Ms-Distribution</div>
          <div class="small">Presentadores: Victor y Maria</div>
        </div>
      </header>

      <div class="main">
        <div class="quiz-area">
          <div class="question-card">
            <div class="qtop">
              <div>
                <div class="qnum small">Pregunta <span id="qIndex">1</span>/<span id="qTotal">10</span></div>
                <div class="qtext" id="qText">Cargando pregunta...</div>
              </div>
              <div style="text-align:right">
                <div class="timer" id="timer">--</div>
                <div class="small">Tiempo restante</div>
              </div>
            </div>
            <div class="progress"><i id="progBar"></i></div>

            <div class="answers" id="answers">
              <!-- botones de respuesta -->
            </div>
          </div>

          <div style="display:flex;gap:0.6rem;margin-top:10px;align-items:center">
            <button class="btn" id="skipBtn">Saltar</button>
            <div style="margin-left:auto" class="small">Haz click en la respuesta que consideres correcta.</div>
          </div>

        </div>

        <aside class="sidebar">
          <div class="stat">
            <div class="small">Puntaje</div>
            <div class="score" id="score">0</div>
          </div>
          <div class="stat">
            <div class="small">Correctas</div>
            <div id="correctCount">0</div>
          </div>
          <div class="stat">
            <div class="small">Incorrectas</div>
            <div id="wrongCount">0</div>
          </div>
          <div class="stat">
            <div class="small">Tiempo por pregunta</div>
            <div>15 segundos</div>
          </div>

          <div style="margin-top:12px">
            <button class="btn" id="restart">Reiniciar Quiz</button>
          </div>
        </aside>
      </div>

      <footer>
        <small>Dise√±o inspirado en el Sistema JASS ‚Äî Gesti√≥n de agua para comunidades</small>
      </footer>
    </div>
  </div>

  <script>
    // Preguntas tomadas y adaptadas de las Diapositivas Presentadas - JASS-Prs1_Ms-Distribution
    // Banco de preguntas ampliado con diferentes niveles de dificultad
    const allQuestions = [
      // Nivel f√°cil
      {
        q: '¬øCu√°l es una raz√≥n principal por la que el proyecto JASS importa?',
        a: ['Mejora el dise√±o de instalaciones p√∫blicas','Facilita la gesti√≥n del servicio de agua en comunidades','Reduce el n√∫mero de usuarios','Aumenta la burocracia administrativa'],
        correct: 1,
        difficulty: 'easy'
      },
      {
        q: 'Seg√∫n las diapositivas presentadas, ¬øqu√© problema pasaba antes en la JASS?',
        a: ['Los reportes se generaban demasiado r√°pido','Se perd√≠an datos y los reportes demoraban mucho','Hab√≠a demasiada digitalizaci√≥n','Los usuarios no pagaban nunca'],
        correct: 1,
        difficulty: 'easy'
      },
      {
        q: '¬øC√≥mo definen las diapositivas presentadas al "Sistema JASS"?',
        a: ['Un tablero para redes sociales','Una aplicaci√≥n web que digitaliza la administraci√≥n del agua','Un hardware para medir caudal','Un sistema para vender agua embotellada'],
        correct: 1,
        difficulty: 'easy'
      },
      {
        q: '¬øCu√°l de estas funciones aparece en las diapositivas presentadas?',
        a: ['Registro digital de usuarios','Creaci√≥n de videojuegos para la comunidad','Transmisi√≥n en vivo 24/7','Producci√≥n de agua potable'],
        correct: 0,
        difficulty: 'easy'
      },
      {
        q: '¬øQu√© rol forma parte de la estructura del sistema JASS seg√∫n las diapositivas presentadas?',
        a: ['Cliente de dise√±o','Super-admin','Moderador externo','Proveedor de agua'],
        correct: 1,
        difficulty: 'easy'
      },
      
      // Nivel medio
      {
        q: '¬øQu√© ventaja directa mencionan las diapositivas sobre digitalizar registros?',
        a: ['Permite c√°lculos manuales m√°s largos','Reduce errores y entrega reportes instant√°neos','Aumenta el uso de papel','Hace m√°s dif√≠cil el acceso a historiales'],
        correct: 1,
        difficulty: 'medium'
      },
      {
        q: '¬øQu√© describe el despliegue del sistema JASS en las diapositivas presentadas?',
        a: ['R√°pido y seguro','Lento y costoso','Solo para grandes ciudades','Exclusivo para administradores externos'],
        correct: 0,
        difficulty: 'medium'
      },
      {
        q: '¬øCu√°l es un problema de registrar todo en cuadernos seg√∫n las diapositivas?',
        a: ['Los cuadernos son caros','Se pierden datos y aparecen errores','Mejoran la velocidad de consulta','Permiten backups autom√°ticos'],
        correct: 1,
        difficulty: 'medium'
      },
      {
        q: '¬øQu√© permite el sistema respecto a pagos, seg√∫n las diapositivas presentadas?',
        a: ['Hacer c√°lculos y emitir recibos autom√°ticamente','Eliminar la necesidad de pagar','Guardar pagos solo en papel','Cambiar monedas autom√°ticamente'],
        correct: 0,
        difficulty: 'medium'
      },
      
      // Nivel dif√≠cil
      {
        q: '¬øCu√°l es el lema o frase clave usada en las diapositivas presentadas?',
        a: ['Una sola plataforma puede mejorar la organizaci√≥n del agua para toda una comunidad.','La tecnolog√≠a complica la vida rural.','M√°s papel es mejor para los registros.','El agua se gestiona sola si se espera bastante.'],
        correct: 0,
        difficulty: 'hard'
      },
      {
        q: '¬øQu√© beneficio adicional brinda el sistema JASS adem√°s de la gesti√≥n de pagos?',
        a: ['Genera informes estad√≠sticos automatizados','Vende equipos de medici√≥n','Ofrece servicios de mantenimiento','Realiza excavaciones hidr√°ulicas'],
        correct: 0,
        difficulty: 'hard'
      },
      {
        q: '¬øQu√© tipo de usuarios puede acceder al panel de administraci√≥n del sistema?',
        a: ['Solo el super-administrador','Solo usuarios t√©cnicos','Solo usuarios con rol espec√≠fico','Cualquier usuario registrado'],
        correct: 2,
        difficulty: 'hard'
      },
      {
        q: '¬øCu√°l es la principal ventaja del sistema JASS sobre los m√©todos tradicionales de registro?',
        a: ['Menor costo de implementaci√≥n','Acceso a datos en tiempo real','Menor cantidad de personal','Uso de papel reciclado'],
        correct: 1,
        difficulty: 'hard'
      }
    ];
    
    // Funci√≥n para seleccionar preguntas aleatorias con distribuci√≥n equilibrada
    function selectRandomQuestions() {
      // Mezclar todas las preguntas
      const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
      
      // Seleccionar preguntas de cada nivel
      const easy = shuffled.filter(q => q.difficulty === 'easy');
      const medium = shuffled.filter(q => q.difficulty === 'medium');
      const hard = shuffled.filter(q => q.difficulty === 'hard');
      
      // Seleccionar 4 f√°ciles, 3 medianas y 3 dif√≠ciles
      const selected = [
        ...easy.slice(0, 4),
        ...medium.slice(0, 3),
        ...hard.slice(0, 3)
      ];
      
      // Mezclar el conjunto final
      return selected.sort(() => 0.5 - Math.random());
    }
    
    // Seleccionar preguntas para este quiz
    const questions = selectRandomQuestions();

    const qTotal = questions.length;
    let index = 0, score = 0, correctCount = 0, wrongCount = 0;
    const timePerQ = 60; // segundos
    let timerInterval, timeLeft;

    const qIndexEl = document.getElementById('qIndex');
    const qTotalEl = document.getElementById('qTotal');
    const qText = document.getElementById('qText');
    const answersEl = document.getElementById('answers');
    const timerEl = document.getElementById('timer');
    const progBar = document.getElementById('progBar');
    const scoreEl = document.getElementById('score');
    const correctEl = document.getElementById('correctCount');
    const wrongEl = document.getElementById('wrongCount');

    qTotalEl.textContent = qTotal;

    function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

    function startQuestion(){
      clearInterval(timerInterval);
      const q = questions[index];
      qIndexEl.textContent = index+1;
      qText.textContent = q.q;
      answersEl.innerHTML = '';
      // create answers in shuffled order but keep track of correct index
      const ansOrder = q.a.map((t,i)=>({t,i}));
      shuffle(ansOrder);
      ansOrder.forEach((item, idx)=>{
        const btn = document.createElement('button');
        btn.className = 'ans a'+(idx+1);
        btn.innerHTML = String.fromCharCode(65+idx)+'. '+item.t;
        btn.dataset.origIndex = item.i; // original index maps to correctness
        btn.addEventListener('click', onAnswer);
        answersEl.appendChild(btn);
      });

      // progress
      progBar.style.width = ((index)/qTotal*100)+'%';

      // timer
      timeLeft = timePerQ;
      timerEl.textContent = timeLeft+'s';
      timerInterval = setInterval(()=>{
        timeLeft--; if(timeLeft<=0){clearInterval(timerInterval); markWrong(null,true)}; timerEl.textContent = timeLeft+'s'
      },1000)
    }

    function onAnswer(e){
      const btn = e.currentTarget; const orig = Number(btn.dataset.origIndex);
      checkAnswer(orig, btn);
    }

    function checkAnswer(origIndex, btnClicked){
      clearInterval(timerInterval);
      const q = questions[index];
      const correctIndex = q.correct;
      // find which displayed button has origIndex === correctIndex
      const buttons = Array.from(answersEl.querySelectorAll('button'));
      buttons.forEach(b=>{
        if(Number(b.dataset.origIndex) === correctIndex){ b.classList.add('correct'); b.style.borderColor='rgba(46,125,50,0.12)'; }
        if(Number(b.dataset.origIndex) !== correctIndex){ b.classList.add('wrong'); }
        b.disabled = true;
      })

      if(origIndex === correctIndex){
        // Mostrar alerta de √©xito
        showAlert('üéâ ¬°Excelente! üéâ<br>Has comprendido perfectamente<br>üèÜ ¬°Premio desbloqueado! üèÜ', 'success');
        // rewarded
        const points = 100 + timeLeft*5; score += points; correctCount++;
      } else { 
        wrongCount++; 
        // Mostrar alerta de error con la respuesta correcta
        const correctAnswer = q.a[correctIndex];
        showAlert(`üìö ¬°Sigue estudiando!<br>Puedes mejorar a√∫n m√°s<br><div class="correct-answer">‚úÖ Respuesta correcta: ${correctAnswer}</div>`, 'error');
      }
      updateStats();
      // wait then next
      setTimeout(()=>{ 
        hideAlert();
        nextQuestion(); 
      },7000);
    }

    function markWrong(btn, timedOut=false){
      const q = questions[index];
      const buttons = Array.from(answersEl.querySelectorAll('button'));
      buttons.forEach(b=>{
        if(Number(b.dataset.origIndex) === q.correct){ b.classList.add('correct'); }
        else{ b.classList.add('wrong'); }
        b.disabled = true;
      })
      if(timedOut) {
        wrongCount++;
        // Mostrar alerta de tiempo agotado con la respuesta correcta
        const correctAnswer = q.a[q.correct];
        showAlert(`‚è∞ ¬°Tiempo agotado!<br>No te rindas, int√©ntalo de nuevo<br><div class="correct-answer">‚úÖ Respuesta correcta: ${correctAnswer}</div>`, 'error');
      }
      updateStats();
      setTimeout(()=>{ 
        hideAlert();
        nextQuestion(); 
      },7000);
    }

    function nextQuestion(){
      index++;
      if(index>=qTotal){ finishQuiz(); return; }
      startQuestion();
    }

    function updateStats(){
      scoreEl.textContent = score;
      correctEl.textContent = correctCount;
      wrongEl.textContent = wrongCount;
      progBar.style.width = ((index)/qTotal*100)+'%';
    }

    document.getElementById('skipBtn').addEventListener('click', ()=>{ clearInterval(timerInterval); wrongCount++; updateStats(); setTimeout(()=>{ nextQuestion(); },300); })
    document.getElementById('restart').addEventListener('click', ()=>{ index=0; score=0; correctCount=0; wrongCount=0; updateStats(); startQuestion(); })

    function finishQuiz(){
      // show results
      const wrap = document.querySelector('.card');
      wrap.innerHTML = `
        <header style="display:flex;align-items:center;gap:1rem;padding:1.2rem 1.6rem;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white">
          <div class="logo">JASS</div>
          <div>
            <div class="title">Resultados ‚Äî Quiz JASS</div>
            <div class="subtitle">¬°Buen trabajo!</div>
          </div>
        </header>
        <div style="padding:2rem;text-align:center">
          <div style="font-size:28px;font-weight:800;color:var(--accent)">Puntaje: ${score}</div>
          <div style="margin-top:12px;font-size:18px">Correctas: ${correctCount} ‚Ä¢ Incorrectas: ${wrongCount}</div>
          <div style="margin-top:18px;max-width:700px;margin-left:auto;margin-right:auto">
            <div style="background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(2,40,80,0.06)">
              <p class="small">Revisa las respuestas correctas y repasa la presentaci√≥n para mejorar.</p>
            </div>
          </div>
          <div style="margin-top:18px">
            <button onclick="location.reload()" class="btn">Jugar otra vez</button>
          </div>
        </div>
      `;
    }

    // Funciones para mostrar y ocultar alertas personalizadas
    function showAlert(message, type) {
      // Eliminar cualquier alerta existente
      hideAlert();
      
      // Crear elemento de alerta
      const alert = document.createElement('div');
      alert.className = `alert alert-${type}`;
      alert.innerHTML = message;
      
      // A√±adir al cuerpo del documento
      document.body.appendChild(alert);
      
      // Guardar referencia para poder eliminarla despu√©s
      window.currentAlert = alert;
    }
    
    function hideAlert() {
      if (window.currentAlert) {
        window.currentAlert.remove();
        window.currentAlert = null;
      }
    }
    
    // Mostrar la pantalla de inicio
    document.getElementById('welcomeScreen').style.display = 'flex';
    document.getElementById('quizScreen').style.display = 'none';
    
    // Evento para el bot√≥n de inicio
    document.getElementById('startBtn').addEventListener('click', function() {
      document.getElementById('welcomeScreen').style.display = 'none';
      document.getElementById('quizScreen').style.display = 'flex';
      startQuestion();
    });
  </script>
</body>
</html>
